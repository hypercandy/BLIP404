<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pagination Fragment</title>
</head>
<body>

<!-- Pagination Fragment -->
<div th:fragment="pagination(url, currentPage, totalPages, pageSize)">
    <nav aria-label="Pagination">

        <!-- generates page numbers when total pages < 10 -->
        <ul th:if="${totalPages < 10 and totalPages > 1}" class="mt-3 pagination justify-content-center">

            <!-- prev button -->
            <li class="page-item">
                <a class="page-link" th:classappend="${currentPage == 0} ? 'disabled' : ''" th:href="@{${url}(pageNumber=${currentPage - 1}, pageSize=${pageSize})}">Prev</a>
            </li>

            <!-- numbers -->
            <li th:each="pageNumber : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${pageNumber == currentPage} ? 'active' : ''">
                <a class="page-link"
                   th:href="@{${url}(pageNumber=${pageNumber}, pageSize=${pageSize})}"
                   th:text="${pageNumber + 1}"></a>
            </li>

            <!-- next button -->
            <li class="page-item">
                <a class="page-link" th:classappend="${currentPage == totalPages - 1} ? 'disabled' : ''" th:href="@{${url}(pageNumber=${currentPage + 1}, pageSize=${pageSize})}">Next</a>
            </li>
        </ul>


        <!-- generates page numbers when total pages >= 10 -->
        <ul th:if="${totalPages >= 10}" class="pagination justify-content-center">

            <!-- prev button -->
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled' : ''">
                <a class="page-link" th:href="@{${url}(pageNumber=${currentPage - 1}, pageSize=${pageSize})}">Prev</a>
            </li>

            <!-- first page -->
            <li class="page-item" th:classappend="${0 == currentPage} ? 'active' : ''">
                <a class="page-link" th:href="@{${url}(pageNumber=${0}, pageSize=${pageSize})}">1</a>
            </li>

            <!-- ellipsis -->
            <li class="page-item disabled" th:if="${currentPage - 3 > 0}">
                <a class="page-link" href="#">...</a>
            </li>

            <!-- numbers -->
            <li th:each="pageNumber : ${#numbers.sequence(currentPage - 2, currentPage + 2)}"
                th:if="${pageNumber > 0 and pageNumber < totalPages - 1}" th:classappend="${pageNumber == currentPage} ? 'active' : ''">
                <a class="page-link"
                   th:href="@{${url}(pageNumber=${pageNumber}, pageSize=${pageSize})}" th:text="${pageNumber + 1}"></a> <!-- temporary page size -->
            </li>

            <!-- ellipsis -->
            <li class="page-item disabled" th:if="${currentPage + 3 < totalPages}">
                <a class="page-link" href="#">...</a>
            </li>

            <!-- last page -->
            <li class="page-item" th:classappend="${totalPages - 1 == currentPage} ? 'active' : ''">
                <a class="page-link" th:href="@{${url}(pageNumber=${totalPages - 1}, pageSize=${pageSize})}" th:text="${totalPages}"></a>
            </li>

            <!-- next button -->
            <li class="page-item">
                <a class="page-link" th:classappend="${currentPage == totalPages - 1} ? 'disabled' : ''" th:href="@{${url}(pageNumber=${currentPage + 1}, pageSize=${pageSize})}">Next</a>
            </li>
        </ul>
    </nav>
</div>
</body>
</html>
